# PDF拆分功能说明

## 功能概述

PDF拆分功能允许用户上传PDF文档，将其按页拆分为图片，用户可以选择需要的页面重新组合导出为新的PDF文档。

## 功能特点

- 📄 支持PDF文件上传（最大50MB）
- 🖼️ 自动将PDF按页拆分为高质量图片预览
- ✅ 直观的图片选择界面，默认全选
- 📋 支持全选/全不选批量操作
- 🔄 根据选中页面重新生成PDF文档
- 📁 提供便捷的下载功能

## 使用流程

### 1. 访问PDF拆分页面
- 登录系统后，在左侧导航菜单中点击"PDF拆分"（🔧图标）

### 2. 上传PDF文件
- 点击"选择PDF文件"按钮
- 选择要处理的PDF文档（支持.pdf格式，最大50MB）
- 点击"开始拆分"按钮

### 3. 页面预览与选择
- 系统自动将PDF拆分为图片，每页显示为独立的图片预览
- 所有页面默认为选中状态（显示蓝色勾选框）
- 点击图片可切换选中/取消选中状态
- 使用"全选"/"全不选"按钮进行批量操作

### 4. 导出新PDF
- 确认选择后，点击"确认导出"按钮
- 系统根据选中的页面重新生成PDF文档
- 导出完成后自动下载新的PDF文件

## 技术实现

### 后端处理
- 使用MuPDF库进行PDF解析和渲染
- 高质量图片生成（2倍缩放，JPEG格式）
- 使用PDF-lib库实现真正的页面提取和重组
- 保持原始PDF质量和格式

### 前端界面
- 响应式网格布局，支持多种屏幕尺寸
- 直观的步骤指示器
- 实时的选择状态反馈

### API接口
- `/api/pdf-split/[taskId]/[filename]` - 图片预览服务
- `/api/download/pdf-export/[taskId]` - PDF下载服务

## 文件存储结构

```
uploads/
└── pdf-split/
    └── [taskId]/
        ├── page_001.jpg    # 第1页图片
        ├── page_002.jpg    # 第2页图片
        ├── ...
        └── exported.pdf    # 导出的PDF文件
```

## 注意事项

1. **文件大小限制**: 单个PDF文件不能超过50MB
2. **文件格式**: 仅支持PDF格式文件
3. **临时存储**: 处理文件会临时存储在服务器上
4. **浏览器支持**: 建议使用现代浏览器以获得最佳体验

## 错误处理

- 文件格式不支持时显示错误提示
- 文件过大时显示大小限制提醒
- 网络异常时提供重试机制
- 图片加载失败时显示占位符

## 已实现功能

- ✅ 完整的PDF页面提取和重组
- ✅ 使用PDF-lib确保原始质量
- ✅ 页面选择和预览
- ✅ 错误处理和回退机制
- ✅ 详细的处理日志和信息文件

## 未来扩展

- [ ] 支持页面拖拽排序
- [ ] 添加页面旋转功能
- [ ] 支持多个PDF文件批量处理
- [ ] 增加水印添加功能
- [ ] 支持页面缩放预览
- [ ] 页面范围批量选择（如"1-5,8,10-12"）
